<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TG SHOP LONDRINA</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
    body {margin: 0; font-family: Arial, sans-serif; background-color: #f5f5f5;}
    header {background-color: #111; padding: 10px 20px; color: white; display: flex; align-items: center; justify-content: space-between;}
    header .logo {font-size: 24px; font-weight: bold;}
    header .logo span {background: red; padding: 3px 6px; border-radius: 3px;}
    .search-bar {flex: 1; margin: 0 20px;}
    .search-bar input {width: 100%; padding: 8px; border-radius: 5px; border: none;}
    .icons i {margin-left: 15px; cursor: pointer;}
    nav {background-color: #222; padding: 10px; text-align: center;}
    nav button {
        background: none;
        border: none;
        color: white;
        margin: 0 15px;
        font-weight: bold;
        font-size: 16px;
        cursor: pointer;
    }
    nav button:hover {text-decoration: underline; color: red;}
    .banner {background-color: red; color: white; padding: 30px; text-align: center; font-size: 24px; font-weight: bold;}
    .produtos {display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; padding: 20px;}
    .produto {background: white; padding: 15px; border-radius: 10px; text-align: center; box-shadow: 0 0 5px rgba(0,0,0,0.1);}
    .produto img {max-width: 100%; height: 150px; object-fit: contain;}
    .produto button {background-color: red; color: white; border: none; padding: 10px; width: 100%; border-radius: 5px; margin-top: 10px; cursor: pointer; font-weight: bold;}
    footer {background: #111; color: white; text-align: center; padding: 20px; margin-top: 20px;}

    #carrinhoModal, #dadosClienteModal {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.5);
        justify-content: center;
        align-items: center;
    }
    .conteudo {
        background: white;
        padding: 20px;
        border-radius: 10px;
        width: 400px;
        max-height: 80vh;
        overflow-y: auto;
    }
    .conteudo h2 {margin-top: 0;}
    .item-carrinho {border-bottom: 1px solid #ddd; padding: 10px 0;}
    .btn-finalizar {background: green; color: white; border: none; padding: 10px; width: 100%; border-radius: 5px; margin-top: 10px; cursor: pointer; font-weight: bold;}
    .input-campo {
        width: 100%;
        padding: 10px;
        margin: 8px 0;
        border-radius: 5px;
        border: 1px solid #ccc;
    }
    .toast {
      position: fixed;
      bottom: 30px;
      right: 20px;
      background: #25D366;
      color: white;
      padding: 12px 18px;
      border-radius: 8px;
      font-weight: bold;
      box-shadow: 0px 4px 8px rgba(0,0,0,0.2);
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
      z-index: 9999;
    }
    .toast.show {
      opacity: 1;
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">TG <span>SHOP</span> LONDRINA</div>
    <div class="search-bar">
      <input type="text" id="campoBusca" placeholder="Buscar produtos..." oninput="buscarProduto()">
    </div>
    <div class="icons">
      <i class="fas fa-shopping-cart" onclick="abrirCarrinho()"></i>
    </div>
  </header>

  <nav>
    <button onclick="filtrarProdutos('todos')">Todos</button>
    <button onclick="filtrarProdutos('roupas')">Roupas</button>
    <button onclick="filtrarProdutos('acessorios')">Acess√≥rios</button>
    <button onclick="filtrarProdutos('games')">Games</button>
    <button onclick="filtrarProdutos('casa')">Casa</button>
    <button onclick="filtrarProdutos('higiene')">Higiene</button>
  </nav>

  <div class="banner">promo√ß√£o rel√¢mpago at√© √†s 23:59</div>

  <section class="produtos">
    <!-- Produtos -->
    <div class="produto" data-categoria="roupas">
      <img src="https://i.imgur.com/rJS9YgO.jpeg/150" alt="Produto 1" />
      <h3>Moletom Vermelho</h3>
      <p>R$ 120,00</p>
      <button onclick="addCarrinho('Moletom Vermelho', 120)">Adicionar ao Carrinho</button>
    </div>

    <div class="produto" data-categoria="acessorios">
      <img src="https://i.imgur.com/J48hTZb.jpeg/150" alt="Produto 2" />
      <h3>Rel√≥gio Digital</h3>
      <p>R$ 80,00</p>
      <button onclick="addCarrinho('Rel√≥gio Digital', 80)">Adicionar ao Carrinho</button>
    </div>

    <div class="produto" data-categoria="games">
      <img src="https://i.imgur.com/rWSjhvj.jpeg/150" alt="Produto 3" />
      <h3>Controle PS5</h3>
      <p>R$ 350,00</p>
      <button onclick="addCarrinho('Controle PS5', 350)">Adicionar ao Carrinho</button>
    </div>
  </section>

  <footer>
    <p>¬© 2025 TG SHOP LONDRINA - Todos os direitos reservados</p>
  </footer>

  <div id="carrinhoModal">
    <div class="conteudo">
      <h2>üõí Seu Carrinho</h2>
      <div id="listaCarrinho"></div>
      <button class="btn-finalizar" onclick="abrirFormulario()">‚úÖ Finalizar Pedido</button>
      <button style="margin-top:10px; width:100%;" onclick="fecharCarrinho()">‚ùå Fechar</button>
    </div>
  </div>

  <div id="dadosClienteModal">
    <div class="conteudo">
      <h2>üìã Seus Dados</h2>
      <input type="text" id="nomeCliente" class="input-campo" placeholder="Seu nome completo" />
      <input type="text" id="enderecoCliente" class="input-campo" placeholder="Seu endere√ßo completo" />
      <button class="btn-finalizar" onclick="finalizarPedido()">üì≤ Enviar Pedido no WhatsApp</button>
      <button style="margin-top:10px; width:100%;" onclick="fecharFormulario()">‚ùå Cancelar</button>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    function addCarrinho(produto, preco) {
        carrinho.push({produto, preco});
        localStorage.setItem('carrinho', JSON.stringify(carrinho));
        mostrarToast('‚úÖ Produto adicionado ao carrinho!');
    }

    function abrirCarrinho() {
        document.getElementById('carrinhoModal').style.display = 'flex';
        atualizarCarrinho();
    }

    function fecharCarrinho() {
        document.getElementById('carrinhoModal').style.display = 'none';
    }

    function atualizarCarrinho() {
        let lista = document.getElementById('listaCarrinho');
        lista.innerHTML = '';
        let total = 0;

        carrinho.forEach((item, index) => {
            total += item.preco;
            lista.innerHTML += `
                <div class="item-carrinho">
                    ${item.produto} - R$ ${item.preco},00 
                    <button onclick="removerItem(${index})">üóë</button>
                </div>`;
        });

        lista.innerHTML += `<p><strong>Total: R$ ${total},00</strong></p>`;
    }

    function removerItem(index) {
        carrinho.splice(index, 1);
        localStorage.setItem('carrinho', JSON.stringify(carrinho));
        atualizarCarrinho();
    }

    function abrirFormulario() {
        if (carrinho.length === 0) {
            mostrarToast('‚ö†Ô∏è Seu carrinho est√° vazio!');
            return;
        }
        fecharCarrinho();
        document.getElementById('dadosClienteModal').style.display = 'flex';
    }

    function fecharFormulario() {
        document.getElementById('dadosClienteModal').style.display = 'none';
    }

    function finalizarPedido() {
        let nome = document.getElementById('nomeCliente').value.trim();
        let endereco = document.getElementById('enderecoCliente').value.trim();

        if (!nome || !endereco) {
            mostrarToast('‚ö†Ô∏è Preencha seu nome e endere√ßo!');
            return;
        }

        let mensagem = `*Novo Pedido via Site*\n\n`;
        mensagem += `üë§ *Cliente:* ${nome}\n`;
        mensagem += `üìç *Endere√ßo:* ${endereco}\n\n`;
        mensagem += `üõí *Itens do pedido:*\n`;

        carrinho.forEach(item => {
            mensagem += `‚Ä¢ ${item.produto} - R$ ${item.preco},00\n`;
        });

        let total = carrinho.reduce((acc, item) => acc + item.preco, 0);
        mensagem += `\nüí∞ *Total: R$ ${total},00*`;

        enviarMensagemCallMeBot(mensagem);
    }

    // ‚úÖ CallMeBot com dois n√∫meros
    const APIKEY1 = '2198964';  // Antigo n√∫mero
    const PHONE1 = '556296094975';

    const APIKEY2 = '5061366';  // Novo n√∫mero
    const PHONE2 = '554399632114';

    function enviarMensagemCallMeBotIndividual(phone, apikey, mensagem) {
        const msgEncoded = encodeURIComponent(mensagem);
        const url = `https://api.callmebot.com/whatsapp.php?phone=${phone}&text=${msgEncoded}&apikey=${apikey}`;
        return fetch(url).then(res => {
            if (!res.ok) throw new Error('Erro no envio');
        });
    }

    function enviarMensagemCallMeBot(mensagem) {
        Promise.all([
            enviarMensagemCallMeBotIndividual(PHONE1, APIKEY1, mensagem),
            enviarMensagemCallMeBotIndividual(PHONE2, APIKEY2, mensagem)
        ])
        .then(() => {
            mostrarToast('‚úÖ Pedido enviado com sucesso para os dois n√∫meros!');
            localStorage.removeItem('carrinho');
            carrinho = [];
            fecharFormulario();
        })
        .catch(() => {
            mostrarToast('‚ö†Ô∏è Falha ao enviar o pedido.');
        });
    }

    function filtrarProdutos(categoria) {
        let produtos = document.querySelectorAll('.produto');
        produtos.forEach(produto => {
            produto.style.display = (categoria === 'todos' || produto.dataset.categoria === categoria) ? 'block' : 'none';
        });
    }

    function buscarProduto() {
        let termo = document.getElementById('campoBusca').value.toLowerCase();
        let produtos = document.querySelectorAll('.produto');
        produtos.forEach(produto => {
            let nomeProduto = produto.querySelector('h3').textContent.toLowerCase();
            produto.style.display = nomeProduto.includes(termo) ? 'block' : 'none';
        });
    }

    function mostrarToast(mensagem) {
        let toast = document.getElementById('toast');
        toast.textContent = mensagem;
        toast.classList.add('show');
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }
  </script>
</body>
</html>
